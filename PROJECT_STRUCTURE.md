# ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Gold Trading System

## üìä ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å:
1. **Frontend** - Next.js 16 + React 19 (App Router)
2. **Backend** - Node.js + Express + Socket.IO
3. **Database** - MongoDB

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Client (Browser)                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Next.js Frontend (Port 3000)                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   - React Components                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   - Real-time Charts                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   - WebSocket Client                            ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ HTTP/REST        ‚îÇ WebSocket
                  ‚îÇ                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îê
‚îÇ             Express Server (Port 5000)                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  REST API Routes                                 ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - /api/auth       (Login, Register)            ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - /api/wallet     (Deposit, Withdraw, Exchange)‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - /api/trading    (Buy, Sell, History)         ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - /api/prices     (Current, History)           ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - /api/admin      (Status Control)             ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Socket.IO Server                                ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Price Updates (Real-time)                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Status Updates (Real-time)                    ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ  Services                                        ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - goldPriceService (Fetch & Broadcast)         ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - goldStatusService (Status Management)        ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  - exchangeRateService (Currency Exchange)      ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ MongoDB Driver
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                MongoDB Database                          ‚îÇ
‚îÇ  - users                (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)                     ‚îÇ
‚îÇ  - wallets              (‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô)                   ‚îÇ
‚îÇ  - transactions         (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢)             ‚îÇ
‚îÇ  - gold_statuses        (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î)                  ‚îÇ
‚îÇ  - gold_price_history   (‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏Ñ‡∏≤)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

## üìÇ Frontend Structure (app/)

app/
‚îú‚îÄ‚îÄ api/                    # Next.js API Routes (Proxy ‡πÑ‡∏õ Backend)
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ status/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts    # Admin status management
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts    # Login endpoint
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts    # Register endpoint
‚îÇ   ‚îú‚îÄ‚îÄ prices/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ current/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts    # Get current prices
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [goldType]/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ route.ts # Get price history
‚îÇ   ‚îú‚îÄ‚îÄ trading/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ execute/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route.ts    # Execute trades
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ route.ts    # Transaction history
‚îÇ   ‚îî‚îÄ‚îÄ wallet/
‚îÇ       ‚îú‚îÄ‚îÄ deposit/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts    # Deposit money
‚îÇ       ‚îú‚îÄ‚îÄ withdraw/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts    # Withdraw money
‚îÇ       ‚îî‚îÄ‚îÄ route.ts        # Get wallet info
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx         # ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RegisterForm.tsx      # ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Navbar.tsx            # Navigation bar
‚îÇ   ‚îú‚îÄ‚îÄ trading/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GoldChart.tsx         # ‡∏Å‡∏£‡∏≤‡∏ü‡∏´‡∏•‡∏±‡∏Å (6 charts)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MiniGoldChart.tsx     # ‡∏Å‡∏£‡∏≤‡∏ü‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å + Tab ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PriceCard.tsx         # ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TradePanel.tsx        # Panel ‡∏ã‡∏∑‡πâ‡∏≠/‡∏Ç‡∏≤‡∏¢
‚îÇ   ‚îú‚îÄ‚îÄ transactions/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionList.tsx   # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°
‚îÇ   ‚îú‚îÄ‚îÄ wallet/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WalletCard.tsx        # ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô (‡πÅ‡∏™‡∏î‡∏á Balance, P/L)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GoldHoldingsCard.tsx  # ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DepositDialog.tsx     # Dialog ‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WithdrawDialog.tsx    # Dialog ‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ExchangeDialog.tsx    # Dialog ‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ ui/                       # Shadcn UI Components
‚îÇ       ‚îú‚îÄ‚îÄ button.tsx
‚îÇ       ‚îú‚îÄ‚îÄ card.tsx
‚îÇ       ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ       ‚îî‚îÄ‚îÄ ... (40+ components)
‚îÇ
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx           # Authentication context
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.ts            # Hook ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö responsive
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts             # Hook ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö toast notifications
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api-client.ts            # API client class (fetch wrapper)
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                 # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ websocket.ts             # WebSocket client setup
‚îÇ
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ AdminPage.tsx            # ‡∏´‡∏ô‡πâ‡∏≤ Admin dashboard
‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.tsx            # ‡∏´‡∏ô‡πâ‡∏≤ Login
‚îÇ   ‚îú‚îÄ‚îÄ MainDashboard.tsx        # ‡∏´‡∏ô‡πâ‡∏≤ User dashboard ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îú‚îÄ‚îÄ WalletPage.tsx           # ‡∏´‡∏ô‡πâ‡∏≤ Wallet
‚îÇ   ‚îú‚îÄ‚îÄ CardPage.tsx             # ‡∏´‡∏ô‡πâ‡∏≤ Cards view
‚îÇ   ‚îú‚îÄ‚îÄ ChartPage.tsx            # ‡∏´‡∏ô‡πâ‡∏≤ Charts view
‚îÇ   ‚îî‚îÄ‚îÄ TransactionPage.tsx      # ‡∏´‡∏ô‡πâ‡∏≤ Transactions
‚îÇ
‚îú‚îÄ‚îÄ globals.css                  # Global CSS + Tailwind config
‚îú‚îÄ‚îÄ layout.tsx                   # Root layout (Providers, Fonts)
‚îî‚îÄ‚îÄ page.tsx                     # Home page (Route logic)

## üîß Backend Structure (server/)

server/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.js              # MongoDB connection setup
‚îÇ
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ auth.js                  # JWT authentication middleware
‚îÇ
‚îú‚îÄ‚îÄ models/                      # MongoDB Models (Data Layer)
‚îÇ   ‚îú‚îÄ‚îÄ User.js                  # User schema & methods
‚îÇ   ‚îÇ   - create()              # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà + Wallet
‚îÇ   ‚îÇ   - findByEmail()
‚îÇ   ‚îÇ   - findById()
‚îÇ   ‚îÇ   - verifyPassword()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Transaction.js           # Transaction schema & methods
‚îÇ   ‚îÇ   - create()              # ‡∏™‡∏£‡πâ‡∏≤‡∏á transaction
‚îÇ   ‚îÇ   - findByUserId()
‚îÇ   ‚îÇ   - updateStatus()
‚îÇ   ‚îÇ   - createBulk()          # Bulk insert
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ GoldPrice.js             # Gold price schema
‚îÇ   ‚îÇ   - create()
‚îÇ   ‚îÇ   - findLatest()
‚îÇ   ‚îÇ   - findByTimeRange()
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ GoldStatus.js            # Gold status schema
‚îÇ       - getStatus()           # ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
‚îÇ       - updateStatus()        # ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
‚îÇ       - getAllStatuses()
‚îÇ
‚îú‚îÄ‚îÄ routes/                      # Express Route Handlers
‚îÇ   ‚îú‚îÄ‚îÄ auth.js                  # POST /login, /register
‚îÇ   ‚îú‚îÄ‚îÄ wallet.js                # GET, POST /wallet
‚îÇ   ‚îú‚îÄ‚îÄ trading.js               # POST /execute, GET /history
‚îÇ   ‚îú‚îÄ‚îÄ prices.js                # GET /current, /history/:goldType
‚îÇ   ‚îú‚îÄ‚îÄ admin.js                 # GET, PUT /status/:goldType
‚îÇ   ‚îî‚îÄ‚îÄ status.js                # WebSocket status updates
‚îÇ
‚îú‚îÄ‚îÄ services/                    # Business Logic Layer
‚îÇ   ‚îú‚îÄ‚îÄ goldPriceService.js      # Price fetching & broadcasting
‚îÇ   ‚îÇ   - fetchMTSPrices()      # Fetch from MTS API
‚îÇ   ‚îÇ   - fetchChartData()      # Fetch from TradingView
‚îÇ   ‚îÇ   - updatePrices()        # Update & save to DB
‚îÇ   ‚îÇ   - startPriceUpdates()   # Start interval (60s)
‚îÇ   ‚îÇ   - subscribe()           # Subscribe to price updates
‚îÇ   ‚îÇ   - notifySubscribers()   # Broadcast via WebSocket
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ goldStatusService.js     # Status management
‚îÇ   ‚îÇ   - initializeStatuses()  # Load all statuses
‚îÇ   ‚îÇ   - updateAndNotifyStatus() # Update & broadcast
‚îÇ   ‚îÇ   - subscribe()
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ exchangeRateService.js   # Currency exchange
‚îÇ       - fetchRates()          # Fetch USD/THB rate
‚îÇ       - thbToUsd()
‚îÇ       - usdToThb()
‚îÇ       - getRates()
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ create-admin.js          # ‡∏™‡∏£‡πâ‡∏≤‡∏á admin user
‚îÇ   ‚îî‚îÄ‚îÄ mongodb-setup.js         # Setup database & collections
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ run-all-tests.ts         # Unit test runner
‚îÇ
‚îî‚îÄ‚îÄ server.js                    # Main server entry point
    - Express app setup
    - Socket.IO setup
    - Route registration
    - Service initialization
    - WebSocket event handlers

## üîÑ Data Flow

### 1. ‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠/‡∏Ç‡∏≤‡∏¢‡∏ó‡∏≠‡∏á (Trading Flow)

User clicks "‡∏ã‡∏∑‡πâ‡∏≠" button
       ‚îÇ
       ‚îú‚îÄ> TradePanel.tsx
       ‚îÇ    ‚îÇ
       ‚îÇ    ‚îú‚îÄ> apiClient.executeTrade(goldType, action, amount, currency)
       ‚îÇ    ‚îÇ
       ‚îÇ    ‚îî‚îÄ> POST /api/trading/execute
       ‚îÇ              ‚îÇ
       ‚îÇ              ‚îú‚îÄ> Backend: server/routes/trading.js
       ‚îÇ              ‚îÇ       ‚îÇ
       ‚îÇ              ‚îÇ       ‚îú‚îÄ Check gold status (ONLINE/PAUSE/STOP)
       ‚îÇ              ‚îÇ       ‚îú‚îÄ Get current price from goldPriceService
       ‚îÇ              ‚îÇ       ‚îú‚îÄ Check balance in wallets collection
       ‚îÇ              ‚îÇ       ‚îú‚îÄ Create transaction in transactions collection
       ‚îÇ              ‚îÇ       ‚îú‚îÄ Update wallet:
       ‚îÇ              ‚îÇ       ‚îÇ   - Deduct balance
       ‚îÇ              ‚îÇ       ‚îÇ   - Add gold holdings
       ‚îÇ              ‚îÇ       ‚îÇ   - Calculate new averageCost
       ‚îÇ              ‚îÇ       ‚îî‚îÄ Update transaction status to COMPLETED
       ‚îÇ              ‚îÇ
       ‚îÇ              ‚îî‚îÄ> Response: { success, transaction, wallet }
       ‚îÇ
       ‚îî‚îÄ> Frontend updates:
            - Wallet state
            - Transaction list
            - Toast notification

### 2. ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏ö‡∏ö Real-time (Price Update Flow)

Server Startup
    ‚îÇ
    ‚îú‚îÄ> goldPriceService.startPriceUpdates()
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> setInterval(60s)
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îî‚îÄ> goldPriceService.updatePrices()
    ‚îÇ                       ‚îÇ
    ‚îÇ                       ‚îú‚îÄ fetchMTSPrices()         (MTS API)
    ‚îÇ                       ‚îú‚îÄ fetchChartData(XAUUSD)   (TradingView)
    ‚îÇ                       ‚îú‚îÄ fetchChartData(GLD9999)  (TradingView)
    ‚îÇ                       ‚îú‚îÄ fetchChartData(GLD965)   (TradingView)
    ‚îÇ                       ‚îú‚îÄ fetchChartData(GLDGTA)   (TradingView)
    ‚îÇ                       ‚îÇ
    ‚îÇ                       ‚îú‚îÄ Apply status control:
    ‚îÇ                       ‚îÇ   - ONLINE ‚Üí use new price
    ‚îÇ                       ‚îÇ   - PAUSE  ‚Üí use last price
    ‚îÇ                       ‚îÇ   - STOP   ‚Üí set to null
    ‚îÇ                       ‚îÇ
    ‚îÇ                       ‚îú‚îÄ Save to gold_price_history collection
    ‚îÇ                       ‚îÇ
    ‚îÇ                       ‚îî‚îÄ> notifySubscribers(prices)
    ‚îÇ                               ‚îÇ
    ‚îÇ                               ‚îî‚îÄ> Socket.IO emits "priceUpdate"
    ‚îÇ                                       ‚îÇ
    ‚îÇ                                       ‚îî‚îÄ> All connected clients receive update
    ‚îÇ                                               ‚îÇ
    ‚îÇ                                               ‚îî‚îÄ> Frontend: app/page.tsx
    ‚îÇ                                                       ‚îî‚îÄ> Updates prices state
    ‚îÇ                                                           ‚îî‚îÄ> Re-renders all price displays


### 3. Authentication Flow

User submits login form
    ‚îÇ
    ‚îú‚îÄ> LoginForm.tsx
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ> AuthContext.login(email, password)
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îî‚îÄ> apiClient.login(email, password)
    ‚îÇ                       ‚îÇ
    ‚îÇ                       ‚îî‚îÄ> POST /api/auth/login
    ‚îÇ                               ‚îÇ
    ‚îÇ                               ‚îî‚îÄ> Backend: server/routes/auth.js
    ‚îÇ                                       ‚îÇ
    ‚îÇ                                       ‚îú‚îÄ Find user by email
    ‚îÇ                                       ‚îú‚îÄ Verify password (bcrypt)
    ‚îÇ                                       ‚îú‚îÄ Generate JWT token
    ‚îÇ                                       ‚îî‚îÄ Response: { token, user }
    ‚îÇ                                               ‚îÇ
    ‚îÇ                                               ‚îî‚îÄ> Frontend stores:
    ‚îÇ                                                   - token in localStorage
    ‚îÇ                                                   - user in AuthContext
    ‚îÇ                                                   - user in localStorage
    ‚îÇ                                                       ‚îÇ
    ‚îÇ                                                       ‚îî‚îÄ> Redirect to dashboard


## üîê Security Measures

1. **Password Hashing**
   - ‡πÉ‡∏ä‡πâ `bcrypt` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö hash passwords
   - Salt rounds = 10

2. **JWT Authentication**
   - Token expires in 24 hours
   - Stored in localStorage (client)
   - Sent via Authorization header

3. **Middleware Protection**
   - `authMiddleware` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö JWT token
   - Protected routes require valid token

4. **Input Validation**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö required fields
   - Validate data types ‡πÅ‡∏•‡∏∞ ranges
   - Sanitize user inputs

## üìä Database Schema Details
### Wallet Balance Calculation

**‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì**‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (Average Cost):**
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ã‡∏∑‡πâ‡∏≠
- currentHoldings = wallet.goldHoldings[goldType] || 0
- currentAverageCost = wallet.averageCosts[goldType] || 0
- newHoldings = currentHoldings + buyAmount
- newAverageCost = (currentAverageCost * currentHoldings + buyPrice * buyAmount) / newHoldings

- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
- ‡∏°‡∏µ‡∏ó‡∏≠‡∏á 10g @ 1000 THB/g (‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô 10,000 THB)
- ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° 5g @ 1200 THB/g (‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô 6,000 THB)
- ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÉ‡∏´‡∏°‡πà = (10,000 + 6,000) / 15 = 1,066.67 THB/g

**‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô (P/L):**
‡πÉ‡∏ä‡πâ sellOut price ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- currentMarketPrice = prices[goldType].sellOut
- averageCost = wallet.averageCosts[goldType]
- holdings = wallet.goldHoldings[goldType]

- profitOrLoss = (currentMarketPrice - averageCost) * holdings
- profitOrLossPercent = ((currentMarketPrice - averageCost) / averageCost) * 100

- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
- ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: 1,066.67 THB/g
- ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î: 1,150 THB/g
- ‡∏ñ‡∏∑‡∏≠: 15g
- P/L = (1,150 - 1,066.67) * 15 = 1,250 THB (+7.81%)

## üéØ Key Features Implementation

### 1. Real-time Price Updates
- goldPriceService ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏Å 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡∏™‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô WebSocket ‡πÑ‡∏õ‡∏¢‡∏±‡∏á clients ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- Frontend subscribe ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó UI automatically

### 2. Status Control (ONLINE/PAUSE/STOP)
- Admin ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô status ‡∏ú‡πà‡∏≤‡∏ô admin dashboard
- Backend ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö status ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å trade
- Price service ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏≤‡∏° status

### 3. Multi-Currency Support
- Wallet ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö THB ‡πÅ‡∏•‡∏∞ USD
- ‡∏ó‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏ä‡πâ‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
- ‡∏°‡∏µ exchange rate service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô

### 4. Chart with Multiple Timeframes
- MiniGoldChart ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 6 timeframes: 1m, 5m, 30m, 1h, 1d, 1w
- ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å gold_price_history collection
- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏î‡πâ‡∏ß‡∏¢ Chart.js + chartjs-adapter-date-fns

## üöÄ Performance Optimization

1. **Database Indexing**
   - `userId` index on wallets
   - `userId` + `createdAt` compound index on transactions
   - `goldType` index on gold_statuses

2. **WebSocket vs Polling**
   - ‡πÉ‡∏ä‡πâ WebSocket ‡πÅ‡∏ó‡∏ô HTTP polling
   - ‡∏•‡∏î network traffic ‡πÅ‡∏•‡∏∞ server load

3. **React Optimization**
   - useCallback ‡πÅ‡∏•‡∏∞ useMemo ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö expensive operations
   - Component memoization ‡∏î‡πâ‡∏ß‡∏¢ React.memo

4. **MongoDB Connection Pooling**
   - Reuse connections ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
